<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Get observations &mdash; istSOS 2.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="istSOS 2.0 documentation" href="index.html" />
    <link rel="next" title="Editing observations" href="editobs.html" />
    <link rel="prev" title="Quality indexes of observations" href="quality.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="editobs.html" title="Editing observations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="quality.html" title="Quality indexes of observations"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">istSOS 2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="get-observations">
<span id="getobs"></span><h1>Get observations<a class="headerlink" href="#get-observations" title="Permalink to this headline">¶</a></h1>
<p>Accessing the data is possible using:
* the SOS Standard requests,
* WA REST requests or
* directly using the Data Viewer or Data Editor.</p>
<img alt="_images/data_access.png" src="_images/data_access.png" />
<div class="section" id="using-the-sos-standard-requests">
<h2>Using the SOS Standard requests<a class="headerlink" href="#using-the-sos-standard-requests" title="Permalink to this headline">¶</a></h2>
<p>This is a quick view on the GetObservation request parameters using the GET method:</p>
<img alt="_images/go_table.png" src="_images/go_table.png" />
<p>And here some example of reuests:</p>
<p class="rubric"><em>Example 1 - filter on procedure, time, property</em></p>
<p>Requesting rainfall observations from sensor P_LUGANO between 2013-01-01T00:00:00+01 and 2013-02-4T17:00:00+01</p>
<div class="highlight-rest"><div class="highlight"><pre>http://localhost/istsos/demo?
    service=SOS&amp;
    version=1.0.0&amp;
    request=GetObservation&amp;
    offering=temporary&amp;
    procedure=urn:ogc:def:procedure:x-istsos:1.0:P_LUGANO&amp;
    eventTime=2014-06-01T00:00:00+0200/2014-06-03T00:00:00+0200&amp;
    observedProperty=urn:ogc:def:parameter:x-istsos:1.0:meteo:air:rainfall&amp;
    responseFormat=text/xml;subtype=”sensorML/1.0.1”&amp;
    service=SOS&amp;
    version=1.0.0
</pre></div>
</div>
<p><a class="reference external" href="http://localhost/istsos/demo?service=SOS&amp;version=1.0.0&amp;request=GetObservation&amp;offering=temporary&amp;procedure=urn:ogc:def:procedure:x-istsos:1.0:P_LUGANO&amp;eventTime=2014-06-01T00:00:00+0200/2014-06-03T00:00:00+0200&amp;observedProperty=urn:ogc:def:parameter:x-istsos:1.0:meteo:air:rainfall&amp;responseFormat=text/xml;subtype=”sensorML/1.0.1”&amp;service=SOS&amp;">[execute above request]</a></p>
<p class="rubric"><em>Example 2 - filter on time, property</em></p>
<p>Requesting rainfall observations from all the stations between 2014-06-01T00:00:00+02 and
2014-06-03T00:00:00+02</p>
<div class="highlight-rest"><div class="highlight"><pre>http://localhost/istsos/demo?
    service=SOS&amp;
    version=1.0.0&amp;
    request=GetObservation&amp;
    offering=temporary&amp;
    eventTime=2014-06-01T00:00:00+0200/2014-06-03T00:00:00+0200&amp;
    observedProperty=urn:ogc:def:parameter:x-istsos:1.0:meteo:air:rainfall&amp;
    responseFormat=text/xml;subtype=”sensorML/1.0.1”&amp;
    service=SOS&amp;
    version=1.0.0
</pre></div>
</div>
<p><a class="reference external" href="http://localhost/istsos/demo?service=SOS&amp;version=1.0.0&amp;request=GetObservation&amp;offering=temporary&amp;eventTime=2014-06-01T00:00:00+0200/2014-06-03T00:00:00+0200&amp;observedProperty=urn:ogc:def:parameter:x-istsos:1.0:meteo:air:rainfall&amp;responseFormat=text/xml;subtype=”sensorML/1.0.1”&amp;service=SOS&amp;">[execute above request]</a></p>
<p class="rubric"><em>Example 3 - filter on time, property, area filters</em></p>
<p>Requesting rainfall observations from all the stations between 2014-06-01T00:00:00+02 and
2014-06-03T00:00:00+02</p>
<div class="highlight-rest"><div class="highlight"><pre>http://localhost/istsos/demo?
    service=SOS&amp;
    version=1.0.0&amp;
    request=GetObservation&amp;
    offering=temporary&amp;
    observedProperty=meteo&amp;
    responseFormat=text/xml;subtype=”sensorML/1.0.1”&amp;
    service=SOS&amp;
    version=1.0.0&amp;
    featureOfInterest=&lt;ogc:BBOX&gt;
        &lt;ogc:PropertyName&gt;the_geom&lt;/ogc:PropertyName&gt;
        &lt;gml:Box srsName=&#39;EPSG:4326&#39;&gt;
            &lt;gml:coordinates&gt;18,4530,55&lt;/gml:coordinates&gt;&lt;/gml:Box&gt;
        &lt;/ogc:BBOX&gt;
</pre></div>
</div>
<p><a class="reference external" href="http://localhost/istsos/demo?service=SOS&amp;request=GetObservation&amp;offering=temporary&amp;observedProperty=meteo&amp;responseFormat=text/xml;subtype=%E2%80%9DsensorML/1.0.1%E2%80%9D&amp;service=SOS&amp;version=1.0.0&amp;featureOfInterest=%3Cogc:BBOX%3E%3Cogc:PropertyName%3Ethe_geom%3C/ogc:PropertyName%3E%3Cgml:Box%20srsName=%27EPSG:4326%27%3E%3Cgml:coordinates%3E18,45%2030,55%3C/gml:coordinates%3E%3C/gml:Box%3E%3C/ogc:BBOX%3E">[execute above request]</a></p>
<p class="rubric"><em>Example 4 - filter on time, property, distance filters</em></p>
<p>Requesting rainfall observations from all the stations between 2014-06-01T00:00:00+02 and
2014-06-03T00:00:00+02</p>
<div class="highlight-rest"><div class="highlight"><pre>http://localhost/istsos/demo?
    service=SOS&amp;
    version=1.0.0&amp;
    request=GetObservation&amp;
    offering=temporary&amp;
    observedProperty=temperature&amp;
    responseFormat=text/xml;subtype=”sensorML/1.0.1”&amp;
    service=SOS&amp;
    version=1.0.0&amp;
    featureOfInterest=&lt;ogc:DWithin&gt;
        &lt;ogc:PropertyName&gt;SHAPE&lt;/ogc:PropertyName&gt;
        &lt;gml:Point srsName=&quot;EPSG:4326&quot;&gt;
            &lt;gml:coordinates decimal=&quot;.&quot; cs=&quot;,&quot; ts=&quot;&quot;&gt;8.967,46.027&lt;/gml:coordinates&gt;
        &lt;/gml:Point&gt;
        &lt;ogc:Distance&gt;1&lt;/ogc:Distance&gt;
    &lt;/ogc:DWithin&gt;
</pre></div>
</div>
<p><a class="reference external" href="http://localhost/istsos/demo?service=SOS&amp;request=GetObservation&amp;offering=temporary&amp;eventTime=2013-01-01T00:00:00%2001/2013-02-4T17:00:00%2001&amp;observedProperty=temperature&amp;responseFormat=text/xml;subtype=%E2%80%9DsensorML/1.0.1%E2%80%9D&amp;service=SOS&amp;version=1.0.0&amp;featureOfInterest=%3Cogc:DWithin%3E%3Cogc:PropertyName%3ESHAPE%3C/ogc:PropertyName%3E%3Cgml:Point%20srsName=%22EPSG:4326%22%3E%3Cgml:coordinates%20decimal=%22.%22%20cs=%22,%22%20ts=%22%20%22%3E8.967,46.027%3C/gml:coordinates%3E%3C/gml:Point%3E%3Cogc:Distance%3E1%3C/ogc:Distance%3E%3C/ogc:DWithin%3E">[execute above request]</a></p>
</div>
<div class="section" id="using-the-istsos-extending-features">
<h2>Using the istSOS extending features<a class="headerlink" href="#using-the-istsos-extending-features" title="Permalink to this headline">¶</a></h2>
<p>In this part of the tutorial we will explore the extending features of istSOS, developed for
making users life easier and to fulfill data experts requirements.</p>
<p class="rubric"><em>Example 5 - GetObservation with simple names</em></p>
<p>According to the standard observedProperties and procedures are accessible using a
Unique Resource Identifier (URI). This is those used when the observed property and the
procedure was created.
In this tutorial we used for example:</p>
<ul class="simple">
<li><a class="reference external" href="urn:ogc:def:parameter:x-istsos:1.0:meteo:air:rainfall">urn:ogc:def:parameter:x-istsos:1.0:meteo:air:rainfall</a></li>
<li><a class="reference external" href="urn:ogc:def:procedure:x-istsos:1.0:P_LUGANO">urn:ogc:def:procedure:x-istsos:1.0:P_LUGANO</a></li>
</ul>
<p>istSOS is not strict and allows to specify in a GetObservation request just the or procedure
name and/or observed property in the request: as a result for the desired procedures all the
observed properties with that words will be selected (LIKE „%XXX%‟ SQL query).
In a suggested hierarchical usage of URIs, this allows to quickly access to all the subdomain
properties, so for example using <em>observedProperty=urn:ogc:def:parameter:x-
istsos:1.0:meteo</em> in a getObservation request in istSOS will return all the available
observations which measure meteo parameters (rainfall, windspeed, humidity, etc..).</p>
<p>Let‟s try requesting all the rainfall observations between 2014-06-01T00:00:00+02 and 2014-06-
03T00:00:00+02:</p>
<div class="highlight-rest"><div class="highlight"><pre>http://localhost/istsos/demo?
    service=SOS&amp;
    version=1.0.0&amp;
    request=GetObservation&amp;
    offering=temporary&amp;
    eventTime=2014-06-01T00:00:00+0200/2014-06-03T00:00:00+0200&amp;
    observedProperty=rainfall&amp;
    responseFormat=text/xml;subtype=”sensorML/1.0.0”
</pre></div>
</div>
<p><a class="reference external" href="http://localhost/istsos/demo?service=SOS&amp;version=1.0.0&amp;request=GetObservation&amp;offering=temporary&amp;eventTime=2014-06-01T00:00:00+0200/2014-06-03T00:00:00+0200&amp;observedProperty=rainfall&amp;responseFormat=text/xml;subtype=%E2%80%9DsensorML/1.0.0%E2%80%9D">[execute above request]</a></p>
<p>And now the same, but only for LUGANO station:</p>
<div class="highlight-rest"><div class="highlight"><pre>http://localhost/istsos/demo?
    service=SOS&amp;
    version=1.0.0&amp;
    request=GetObservation&amp;
    offering=temporary&amp;
    procedure=P_LUGANO&amp;
    eventTime=2014-06-01T00:00:00+0200/2014-06-03T00:00:00+0200&amp;
    observedProperty=rainfall&amp;
    responseFormat=text/xml;subtype=”sensorML/1.0.1”
</pre></div>
</div>
<p><a class="reference external" href="http://localhost/istsos/demo?service=SOS&amp;version=1.0.0&amp;request=GetObservation&amp;offering=temporary&amp;procedure=P_LUGANO&amp;eventTime=2014-06-01T00:00:00+0200/2014-06-03T00:00:00+0200&amp;observedProperty=rainfall&amp;responseFormat=text/xml;subtype=%E2%80%9DsensorML/1.0.0%E2%80%9D">[execute above request]</a></p>
<p class="rubric"><em>Example 6 - GetObservation with specific time zone</em></p>
<p>istSOS support time zones. Whenever in getObservation request the eventTime is specified
with a time zone (e.g.: +0700) the response will be returned with the same time zone.</p>
<div class="highlight-rest"><div class="highlight"><pre>http://localhost/istsos/demo?
    service=SOS&amp;
    version=1.0.0&amp;
    request=GetObservation&amp;
    offering=temporary&amp;
    procedure=P_LUGANO&amp;
    eventTime=2014-06-01T00:00:00+0500/2014-06-03T00:00:00+0500&amp;
    observedProperty=rainfall&amp;
    responseFormat=text/xml;subtype=”sensorML/1.0.1”&amp;
</pre></div>
</div>
<p><a class="reference external" href="http://localhost/istsos/demo?service=SOS&amp;version=1.0.0&amp;request=GetObservation&amp;offering=temporary&amp;procedure=P_LUGANO&amp;eventTime=2014-06-01T00:00:00+0500/2014-06-03T00:00:00+0500&amp;observedProperty=rainfall&amp;responseFormat=text/xml;subtype=%E2%80%9DsensorML/1.0.0%E2%80%9D">[execute above request]</a></p>
<p class="rubric"><em>Example 7 - GetObservation in CSV or JSON</em></p>
<p>In addition to the mandatory <em>text/xml;subtype=”sensorML/1.0.0”</em> istSOS support also
application/json and text/csv (for simplification also text or json )</p>
<p>Data in CSV:</p>
<div class="highlight-rest"><div class="highlight"><pre>http://localhost/istsos/demo?
    service=SOS&amp;
    version=1.0.0&amp;
    request=GetObservation&amp;
    offering=temporary&amp;
    eventTime=2014-06-01T00:00:00+0200/2014-06-03T00:00:00+0200&amp;
    observedProperty=rainfall&amp;
    responseFormat=text/plain
</pre></div>
</div>
<p><a class="reference external" href="http://localhost/istsos/demo?service=SOS&amp;version=1.0.0&amp;request=GetObservation&amp;offering=temporary&amp;eventTime=2014-06-01T00:00:00+0200/2014-06-03T00:00:00+0200&amp;observedProperty=rainfall&amp;responseFormat=text/plain">[execute above request]</a></p>
<p>Data in JSON:</p>
<div class="highlight-rest"><div class="highlight"><pre>http://localhost/istsos/demo?
    service=SOS&amp;
    version=1.0.0&amp;
    request=GetObservation&amp;
    offering=temporary&amp;
    eventTime=2014-06-01T00:00:00+0200/2014-06-03T00:00:00+0200&amp;
    observedProperty=rainfall&amp;
    responseFormat=application/json
</pre></div>
</div>
<p><a class="reference external" href="http://localhost/istsos/demo?service=SOS&amp;version=1.0.0&amp;request=GetObservation&amp;offering=temporary&amp;eventTime=2014-06-01T00:00:00+0200/2014-06-03T00:00:00+0200&amp;observedProperty=rainfall&amp;responseFormat=application/json">[execute above request]</a></p>
<p class="rubric"><em>Example 8 - GetObservation with data aggregation on the fly</em></p>
<p>When executing a getObservation request istSOS offer an extra feature. Adding vendor
specific parameters <em>aggregateInterval, aggregateFunction, aggregatenodata*</em> and
<a href="#id9"><span class="problematic" id="id10">**</span></a>aggregatenodataqi* you can request data already aggregated by istSOS.</p>
<ul class="simple">
<li><em>aggregateInterval</em>: <a class="reference external" href="http://en.wikipedia.org/wiki/ISO_8601#Durations">ISO 8601 Durations</a> (e.g.: P1DT = 1 Day, PT12H = 12 hours)</li>
<li><em>aggregateFunction</em>: AVG, SUM, MAX, MIN</li>
</ul>
<p>The next two parameters are optional and the default values can be configured using the
Web Admin interface:</p>
<ul class="simple">
<li><em>aggregatenodata</em>: numeric value to use in the case of irregular time series.</li>
<li><em>aggregatenodataqi</em>: the quality index to be assigned to no data.</li>
</ul>
<p>For example we can Request maximal daily temperature observation:</p>
<div class="highlight-rest"><div class="highlight"><pre>http://localhost/istsos/demo?
    service=SOS&amp;
    version=1.0.0&amp;
    request=GetObservation&amp;
    offering=temporary&amp;
    procedure=T_LUGANO&amp;
    eventTime=2014-05-04T00:00:00+01/2014-05-14T00:00:00+01&amp;
    observedProperty=temperature&amp;
    aggregateInterval=PT24H&amp;
    aggregateFunction=MAX&amp;
    responseFormat=text/plain
</pre></div>
</div>
<p><a class="reference external" href="http://localhost/istsos/demo?service=SOS&amp;version=1.0.0&amp;request=GetObservation&amp;offering=temporary&amp;procedure=T_LUGANO&amp;eventTime=2014-05-04T00:00:00+01/2014-05-14T00:00:00+01&amp;observedProperty=temperature&amp;aggregateInterval=PT24H&amp;aggregateFunction=MAX&amp;responseFormat=text/plain">[execute above request]</a></p>
</div>
<div class="section" id="using-the-wa-rest">
<h2>Using the WA REST<a class="headerlink" href="#using-the-wa-rest" title="Permalink to this headline">¶</a></h2>
<p>Composing a WA REST request is all about building the correct path url.</p>
<p class="rubric"><em>GetObservation with WA REST</em></p>
<p>To get the observations execute this request:</p>
<p><a class="reference external" href="http://localhost/istsos/wa/istsos/services/demo/operations/getobservation/offerings/temporary/procedures/T_LUGANO/observedproperties/temper">http://localhost/istsos/wa/istsos/services/demo/operations/getobservation/offerings/temporary/procedures/T_LUGANO/observedproperties/temper</a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Executing a service request, you will receive a list of istSOS service instances: <a class="reference external" href="http://localhost/istsos/wa/istsos/services">http://localhost/istsos/wa/istsos/services</a></li>
<li>Executing a procedures get list operation, you will receive a list of procedures belonging to a specific service: <a class="reference external" href="http://localhost/istsos/wa/istsos/services/demo/procedures/operations/getlist">http://localhost/istsos/wa/istsos/services/demo/procedures/operations/getlist</a></li>
</ul>
</div>
</div>
<div class="section" id="using-the-data-viewer">
<h2>Using the Data Viewer<a class="headerlink" href="#using-the-data-viewer" title="Permalink to this headline">¶</a></h2>
<p>The istSOS web administration pages interact with the service making use of WA REST.
The Data Viewer panel is implemented as an example of data visualization.</p>
<p class="rubric"><em>View observation</em></p>
<p>To open your Web Viewer follow this link: <a class="reference external" href="http://localhost/istsos/admin/viewer.html">http://localhost/istsos/admin/viewer.html</a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Up to now the viewer permit to display data of a single observationProperties only, you can select and display multiple procedures but with the same observed property.</p>
</div>
<p>Go ahead and take some confidence with the <a class="reference external" href="http://localhost/istsos/admin/viewer.html">Data Viewer</a>.</p>
<img alt="_images/data_viewer.png" src="_images/data_viewer.png" />
<p>From the Web Admin:</p>
<blockquote>
<div><ul>
<li><p class="first">Go to Data Viewer</p>
</li>
<li><p class="first">Press the Data Editor button</p>
</li>
<li><dl class="first docutils">
<dt>Like in the Data Viewer sequentially choose</dt>
<dd><ul class="first last simple">
<li>the service <strong>demo</strong>,</li>
<li>the offering <strong>temporary</strong></li>
<li>and then “Add” <strong>BELLINZONA</strong>, <strong>LOCARNO</strong> and <strong>T_LUGANO</strong></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<img alt="_images/load_data.png" src="_images/load_data.png" />
<p>And:</p>
<blockquote>
<div><ul class="simple">
<li>On the right panel choose the Property: air-temperature</li>
<li>Press “Plot”, the last week of measurements is loaded and displayed</li>
</ul>
</div></blockquote>
<img alt="_images/data_loaded.png" src="_images/data_loaded.png" />
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<a href="index.html"><img src="_static/logo.png" border="0" alt="istSOS" align="centre" width="200"/></a>
<hr>
<a href="http://code.google.com/p/istsos/downloads" align="centre">Download istSOS v2.0</a>
<hr>

  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Get observations</a><ul>
<li><a class="reference internal" href="#using-the-sos-standard-requests">Using the SOS Standard requests</a></li>
<li><a class="reference internal" href="#using-the-istsos-extending-features">Using the istSOS extending features</a></li>
<li><a class="reference internal" href="#using-the-wa-rest">Using the WA REST</a></li>
<li><a class="reference internal" href="#using-the-data-viewer">Using the Data Viewer</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="quality.html"
                        title="previous chapter">Quality indexes of observations</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="editobs.html"
                        title="next chapter">Editing observations</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/getobs.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="editobs.html" title="Editing observations"
             >next</a> |</li>
        <li class="right" >
          <a href="quality.html" title="Quality indexes of observations"
             >previous</a> |</li>
        <li><a href="index.html">istSOS 2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Massimiliano Cannata, Milan Antonovic.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>